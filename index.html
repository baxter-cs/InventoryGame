<html>
  <head>

    <script src="https://unpkg.com/vue">
    </script>

    <style>
      .item {
        display: flex;
        background-color: #EEE;
      }
      .item:nth-child(even){
        background-color: #DDD;
      }

      .item .name {
        flex: 1;
      }
      .item .description {
        flex: 4;
      }
    </style>
  </head>
  <body>

    <div id="app">
      <div v-if="mode != 'done'">
        <h2 v-if="item">{{ item.name }}</h2>
          <input v-model="item.name" v-if="mode == 'create'" placeholder="edit me"/>
        <div>
          <textarea v-if="mode == 'change'" v-model="item.description" placeholder="edit me"/></textarea>
        </div>
        <button v-if="mode != 'done'" @click="done()">Done</button>
      </div>
      <div v-if="mode == 'done'">
        <button @click="newCard()">New Card</button>
        <button v-if="items.length > 0" @click="drawCard()">Draw Card</button>
      </div>
      <div class="item-list" v-if="items.length > 0">
        <div class="item" v-for="item in items" ><div class="name">{{ item.name }}</div><div class="description">{{ item.description }}</div></div>
      </div>

    </div>


    <script>
      var items = [];
      var people = [];

      function Item(name){
        this.name = name;
        this.proto = true;
        //this.descriptions = [];
        this.stats = {};
      }

      Item.prototype = {
        name: "NULL",
        AddStat: function(stat, value){
          var statExists = stat.name in this.stats.keys;
          if (statExists){
            var statRecord = this.stats[stat.name];
            statRecord.value += value;
          } else {
            this.stats[stat.name] = { "stat" : stat, "value" : value };
          }
        },
        AddDescription: function(description){
          this.descriptions.push(description);
        }
      }


      var app = new Vue({
        el: '#app',
        data: {
          items: items,
          item: null,
          mode: "done",
        },
        methods: {
          done: function(){
            this.mode = 'done';
          },
          drawCard: function(){
            this.item = this.items[Math.floor( Math.random() * this.items.length)];
            this.mode = "change";
          },
          newCard: function(){
            var item = new Item();
            items.push(item);
            this.item = item;
            this.mode = "create";
          }
        }
      })
    </script>
  </body>
</html>
